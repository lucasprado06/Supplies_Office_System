<<<<<<< HEAD
{% extends 'base.html' %}

{% block title %}Requisições Pendentes{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h2 class="h5 mb-0">Requisições Pendentes</h2>
        </div>
        <div class="card-body">
            {% if requisicoes %}
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Data da Requisição</th>
                                <th scope="col">Solicitante</th>
                                <th scope="col">Departamento</th>
                                <th scope="col">Código</th>
                                <th scope="col">Item</th>
                                <th scope="col">Qtd. Solicitada</th>
                                <th scope="col">Qtd. Separada</th>
                                <th scope="col" class="text-center">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for requisicao in requisicoes %}
                                <form action="{{ url_for('concluir_requisicao') }}" method="post">
                                    <input type="hidden" name="requisicao_id" value="{{ requisicao.id }}">
                                    {% for item in requisicao.itens %}
                                        <tr>
                                            {% if loop.index == 1 %}
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.id }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.data }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.nome }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.departamento }}</td>
                                            {% endif %}
                                            <td>{{ item.codigo }}</td>
                                            <td>{{ item.nome }}</td>
                                            <td>{{ item.quantidade }}</td>
                                            <td>
                                                <input type="number" name="quantidade_separada_{{ item.codigo }}" value="{{ item.quantidade }}" min="0" max="{{ item.quantidade }}" class="form-control form-control-sm" required>
                                            </td>
                                            {% if loop.index == 1 %}
                                                <td rowspan="{{ requisicao.itens | length }}" class="text-center">
                                                    <div class="mt-2">
                                                        <label for="data_retirada_{{ requisicao.id }}">Data de Retirada:</label>
                                                        <input type="date" id="data_retirada_{{ requisicao.id }}" name="data_retirada" class="form-control form-control-sm" required>
                                                    </div>
                                                    <button type="submit" class="btn btn-success mt-2">Marcar como Separado</button>
                                                </td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                </form>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-center">Nenhuma requisição pendente no momento.</p>
            {% endif %}
        </div>
    </div>
    
    <div class="text-right mt-3 no-print">
        <button onclick="window.print()" class="btn btn-secondary">Imprimir Lista</button>
    </div>
</div>
=======
{% extends 'base.html' %}

{% block title %}Requisições Pendentes{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h2 class="h5 mb-0">Requisições Pendentes</h2>
        </div>
        <div class="card-body">
            {% if requisicoes %}
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Data da Requisição</th>
                                <th scope="col">Solicitante</th>
                                <th scope="col">Departamento</th>
                                <th scope="col">Código</th>
                                <th scope="col">Item</th>
                                <th scope="col">Qtd. Solicitada</th>
                                <th scope="col">Qtd. Separada</th>
                                <th scope="col" class="text-center">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for requisicao in requisicoes %}
                                <form action="{{ url_for('concluir_requisicao') }}" method="post">
                                    <input type="hidden" name="requisicao_id" value="{{ requisicao.id }}">
                                    {% for item in requisicao.itens %}
                                        <tr>
                                            {% if loop.index == 1 %}
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.id }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.data }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.nome }}</td>
                                                <td rowspan="{{ requisicao.itens | length }}">{{ requisicao.departamento }}</td>
                                            {% endif %}
                                            <td>{{ item.codigo }}</td>
                                            <td>{{ item.nome }}</td>
                                            <td>{{ item.quantidade }}</td>
                                            <td>
                                                <input type="number" name="quantidade_separada_{{ item.codigo }}" value="{{ item.quantidade }}" min="0" max="{{ item.quantidade }}" class="form-control form-control-sm" required>
                                            </td>
                                            {% if loop.index == 1 %}
                                                <td rowspan="{{ requisicao.itens | length }}" class="text-center">
                                                    <div class="mt-2">
                                                        <label for="data_retirada_{{ requisicao.id }}">Data de Retirada:</label>
                                                        <input type="date" id="data_retirada_{{ requisicao.id }}" name="data_retirada" class="form-control form-control-sm" required>
                                                    </div>
                                                    <button type="submit" class="btn btn-success mt-2">Marcar como Separado</button>
                                                </td>
                                            {% endif %}
                                        </tr>
                                    {% endfor %}
                                </form>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-center">Nenhuma requisição pendente no momento.</p>
            {% endif %}
        </div>
    </div>
    
    <div class="text-right mt-3 no-print">
        <button onclick="window.print()" class="btn btn-secondary">Imprimir Lista</button>
    </div>
</div>
>>>>>>> 03e5749130fad34536beb3151aa93fc91600bb6a
{% endblock %}